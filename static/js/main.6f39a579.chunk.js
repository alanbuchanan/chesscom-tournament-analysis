(this["webpackJsonpchess-tournament-analyser"]=this["webpackJsonpchess-tournament-analyser"]||[]).push([[0],{39:function(e,n,t){},63:function(e,n,t){"use strict";t.r(n);var r=t(0),c=t(1),a=t.n(c),i=t(28),s=t.n(i),o=(t(39),t(15)),u=t.n(o),l=t(29),j=t(18),b=t(7),p=t(5),d=t(11),g=t.n(d),f=t(3),O=t.n(f),h=t(33),m=t(12),x=t(8),v=t(6);function w(){var e=Object(p.a)(["\n  animation-name: ",";\n  animation-duration: 1000ms;\n  animation-iteration-count: infinite;\n  animation-timing-function: linear;\n  margin-top: 20px;\n"]);return w=function(){return e},e}function k(){var e=Object(p.a)(["\n  from {\n      transform:rotate(0deg);\n  }\n  to {\n      transform:rotate(360deg);\n  }\n"]);return k=function(){return e},e}function y(){var e=Object(p.a)(['\n  font-family: "Fjalla One", sans-serif;\n  text-transform: uppercase;\n  border: none;\n  background-color: ',";\n  color: #eee;\n  font-size: 15px;\n  border-radius: 4px;\n  border-bottom: 3px solid #4f773b;\n  margin-top: 10px;\n  padding: 5px 10px;\n  outline: none;\n  cursor: pointer;\n"]);return y=function(){return e},e}function S(){var e=Object(p.a)(["\n  width: 100%;\n  border: none;\n  margin: 10px 0;\n"]);return S=function(){return e},e}function C(){var e=Object(p.a)(["\n  margin-top: 30px;\n  margin-bottom: 60px;\n"]);return C=function(){return e},e}function M(){var e=Object(p.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  margin-bottom: 20px;\n  font-size: 30px;\n"]);return M=function(){return e},e}function F(){var e=Object(p.a)(['\n  font-family: "Fjalla One", sans-serif;\n  text-transform: uppercase;\n']);return F=function(){return e},e}function E(){var e=Object(p.a)(['\n  font-family: "Fjalla One", sans-serif;\n  text-transform: uppercase;\n  font-size: 40px;\n  margin-bottom: 40px;\n']);return E=function(){return e},e}function T(){var e=Object(p.a)(["\n  margin-top: 70px;\n"]);return T=function(){return e},e}function z(){var e=Object(p.a)(["\n  text-align: center;\n  background-color: #444;\n  margin: 30px 0;\n  padding: 20px;\n"]);return z=function(){return e},e}function B(){var e=Object(p.a)(["\n  display: flex;\n  justify-content: center;\n  color: #eee;\n  background-color: #000;\n"]);return B=function(){return e},e}var D="#6E9C47",L=v.a.main(B()),P=v.a.div(z()),R=v.a.div(T()),_=v.a.h1(E()),A=v.a.h2(F()),I=v.a.div(M()),J=v.a.section(C()),U=v.a.input(S()),G=v.a.button(y(),D),W=Object(v.b)(k()),q=v.a.div(w(),W),H=function(e){var n=e.icon;return Object(r.jsx)(m.a,{icon:n,color:D,style:{marginRight:"10px"}})},K=function(e){var n=e.url;return Object(r.jsx)("a",{href:n,style:{marginLeft:"10px"},target:"_blank",rel:"noreferrer",children:Object(r.jsx)(m.a,{icon:x.b,style:{cursor:"pointer"}})})},N=["Opening","Defense","Game","Accepted","Declined"],Q=function(e){var n,t=e.match(/\[.*?]/gm).reduce((function(e,n){var t=n.replace(/[\[\]\"]/g,"").split(/ (.+)/);return e[t[0]]=t[1],e}),{});return Object(j.a)(Object(j.a)({},t),{},{Moves:(n=e,n.split(/\n\n/g)[1].split("  ").reduce((function(e,n){var t=n.split(" "),r=Object(b.a)(t,2),c=r[0],a=r[1];return e[c]=a,e}),{}))})};var V=function(){var e=Object(c.useState)(),n=Object(b.a)(e,2),t=n[0],a=n[1],i=Object(c.useState)(),s=Object(b.a)(i,2),o=s[0],j=s[1],p=Object(c.useState)(),d=Object(b.a)(p,2),f=d[0],v=d[1],w=Object(c.useState)(),k=Object(b.a)(w,2),y=k[0],S=k[1],C=Object(c.useState)(),M=Object(b.a)(C,2),F=M[0],E=M[1],T=Object(c.useState)(),z=Object(b.a)(T,2),B=z[0],D=z[1],W=Object(c.useState)(),V=Object(b.a)(W,2),X=V[0],Y=V[1],Z=Object(c.useState)(),$=Object(b.a)(Z,2),ee=$[0],ne=$[1],te=Object(c.useState)(),re=Object(b.a)(te,2),ce=re[0],ae=re[1],ie=Object(c.useState)(),se=Object(b.a)(ie,2),oe=se[0],ue=se[1],le=function(){var e=Object(l.a)(u.a.mark((function e(n){var t,r,c,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),v(!0),t=y.replace(/(.*\/)*/,""),e.prev=3,e.next=6,g.a.get("https://api.chess.com/pub/tournament/".concat(t));case 6:return r=e.sent,e.next=9,g.a.get(r.data.rounds[0]);case 9:if(!(c=e.sent).data.games){e.next=14;break}a(c.data),e.next=22;break;case 14:if(!c.data.groups){e.next=21;break}return e.next=17,g.a.get(c.data.groups[0]);case 17:i=e.sent,a(i.data),e.next=22;break;case 21:throw new Error;case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(3),j(!0);case 27:return e.prev=27,v(!1),e.finish(27);case 30:case"end":return e.stop()}}),e,null,[[3,24,27,30]])})));return function(n){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){if(t){var e=t.games.map((function(e){return e.eco}));console.log("\ud83d\ude80 ~ file: App.js ~ line 231 ~ openings ~ openings",e);var n=function(e){return e.map((function(e){return function(e,n){return n.reduce((function(e,n){return e.includes(n)?e.substring(0,e.indexOf(n)+n.length):e}),e)}(e.replace("https://www.chess.com/openings/","").replace("-"," "),N)}))}(O.a.compact(e)),r=function(e){return O.a.reduce(e,(function(e,n,t){return n>e.count?{opening:t,count:n}:e}),{opening:"",count:0})}(O.a.countBy(n));E(r);var c=t.games.reduce((function(e,n){var t="win"===n.white.result?n.white.rating:"win"===n.black.result?n.black.rating:null;if(!t)return e;var r="win"===n.white.result?n.black.rating:"win"===n.black.result?n.white.rating:null,c="win"===e.white.result?e.white.rating:"win"===e.black.result?e.black.rating:null;return r-t>("win"===e.white.result?e.black.rating:"win"===e.black.result?e.white.rating:null)-c?n:e}),t.games[0]);D(c);var a=t.players.find((function(e){return O.a.get(e,"is_winner")?e.is_winner:1===e.place_finish})).username;Y(a);var i=t.games.reduce((function(e,n){return e[n.black.result]+=1,e[n.white.result]+=1,e}),{draw:0,win:0,timeout:0,resigned:0,checkmated:0});ne(O.a.pick(i,["checkmated","timeout","resigned"]));var s=t.games.reduce((function(e,n){var t=Q(n.pgn.replace(/\{\[%clk[\s\S]+?(?= |\n)/gim,"")),r=Q(e.pgn.replace(/\{\[%clk[\s\S]+?(?= |\n)/gim,""));return O.a.replace(O.a.nth(Object.keys(t.Moves),-2),/\./g,"")>O.a.replace(O.a.nth(Object.keys(r.Moves),-2),/\./g,"")?n:e}),t.games[0]);ae(s);var o=t.games.reduce((function(e,n){var t=Q(n.pgn.replace(/\{\[%clk[\s\S]+?(?= |\n)/gim,"")),r=Q(e.pgn.replace(/\{\[%clk[\s\S]+?(?= |\n)/gim,""));return O.a.replace(O.a.nth(Object.keys(t.Moves),-2),/\./g,"")<O.a.replace(O.a.nth(Object.keys(r.Moves),-2),/\./g,"")?n:e}),t.games[0]);ue(o)}}),[t]),o?Object(r.jsx)("div",{children:"Sorry, something went wrong. Please try again later."}):Object(r.jsx)(L,{children:Object(r.jsxs)(P,{children:[Object(r.jsx)(_,{children:"Chess.com Tournament Stats"}),Object(r.jsx)(A,{children:"Enter a tournament URL:"}),Object(r.jsxs)("form",{onSubmit:le,children:[Object(r.jsx)(U,{onChange:function(e){return S(e.target.value)}}),Object(r.jsx)(G,{type:"submit",children:"See Stats"})]}),f?Object(r.jsx)(q,{children:Object(r.jsx)(m.a,{icon:x.e,color:"rgba(255,255,255,0.3)"})}):t?Object(r.jsxs)(R,{children:[X&&Object(r.jsxs)(J,{children:[Object(r.jsxs)(I,{children:[Object(r.jsx)(H,{icon:x.g}),Object(r.jsx)(A,{children:"Winner"})]}),Object(r.jsx)("p",{children:X})]}),O.a.get(F,"opening")>0&&Object(r.jsxs)(J,{children:[Object(r.jsxs)(I,{children:[Object(r.jsx)(H,{icon:x.a}),Object(r.jsx)(A,{children:"Most Common Opening"})]}),Object(r.jsxs)("p",{children:[F.opening," - played ",F.count," ","times"]})]}),ee&&Object(r.jsxs)(J,{children:[Object(r.jsxs)(I,{children:[Object(r.jsx)(H,{icon:x.c}),Object(r.jsx)(A,{children:"Result Types"})]}),Object(r.jsx)("div",{style:{width:200,margin:"auto"},children:Object(r.jsx)(h.PieChart,{label:function(e){var n=e.dataEntry;return"".concat(n.title,": ").concat(n.value)},labelStyle:{fontSize:"5px"},data:[{title:"Checkmated",value:ee.checkmated,color:"rgba(255,255,255,0.5)"},{title:"Timeout",value:ee.timeout,color:"rgba(255,255,255,0.2)"},{title:"Resigned",value:ee.resigned,color:"rgba(255,255,255,0.3)"}]})})]}),B&&Object(r.jsxs)(J,{children:[Object(r.jsxs)(I,{children:[Object(r.jsx)(H,{icon:x.f}),Object(r.jsx)(A,{children:"Biggest Upset"})]}),Object(r.jsxs)("p",{children:[B.white.username," (",B.white.rating,") vs"," ",B.black.username," (",B.black.rating,")",Object(r.jsx)(K,{url:B.url})]})]}),ce&&Object(r.jsxs)(J,{children:[Object(r.jsxs)(I,{children:[Object(r.jsx)(H,{icon:x.h}),Object(r.jsx)(A,{children:"Marathon"})]}),Object(r.jsxs)("p",{children:[ce.white.username," vs"," ",ce.black.username," had the most moves!",Object(r.jsx)(K,{url:ce.url})]})]}),oe&&Object(r.jsxs)(J,{children:[Object(r.jsxs)(I,{children:[Object(r.jsx)(H,{icon:x.d}),Object(r.jsx)(A,{children:"Sprint"})]}),Object(r.jsxs)("p",{children:[oe.white.username," vs"," ",oe.black.username," had the fewest moves!",Object(r.jsx)(K,{url:oe.url})]})]})]}):null]})})},X=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,64)).then((function(n){var t=n.getCLS,r=n.getFID,c=n.getFCP,a=n.getLCP,i=n.getTTFB;t(e),r(e),c(e),a(e),i(e)}))};s.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(V,{})}),document.getElementById("root")),X()}},[[63,1,2]]]);
//# sourceMappingURL=main.6f39a579.chunk.js.map
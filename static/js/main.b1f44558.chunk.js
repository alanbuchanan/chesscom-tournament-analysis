(this["webpackJsonpchess-tournament-analyser"]=this["webpackJsonpchess-tournament-analyser"]||[]).push([[0],{39:function(e,n,t){},63:function(e,n,t){"use strict";t.r(n);var r=t(0),c=t(1),a=t.n(c),i=t(28),s=t.n(i),u=(t(39),t(15)),o=t.n(u),l=t(29),j=t(5),b=t(12),d=t.n(b),f=t(3),p=t.n(f),O=t(33),h=t(9),g=t(8),m=t(6),x=t(7);function v(){var e=Object(m.a)(["\n  color: orange;\n  margin-top: 20px;\n"]);return v=function(){return e},e}function k(){var e=Object(m.a)(["\n  animation-name: ",";\n  animation-duration: 1000ms;\n  animation-iteration-count: infinite;\n  animation-timing-function: linear;\n  margin-top: 20px;\n"]);return k=function(){return e},e}function w(){var e=Object(m.a)(['\n  font-family: "Fjalla One", sans-serif;\n  text-transform: uppercase;\n  border: none;\n  background-color: ',";\n  color: #eee;\n  font-size: 15px;\n  border-radius: 4px;\n  border-bottom: 3px solid #4f773b;\n  margin-top: 10px;\n  padding: 5px 10px;\n  outline: none;\n  cursor: pointer;\n"]);return w=function(){return e},e}function y(){var e=Object(m.a)(["\n  width: 100%;\n  border: none;\n  margin: 10px 0;\n"]);return y=function(){return e},e}function S(){var e=Object(m.a)(["\n  margin-top: 30px;\n  margin-bottom: 60px;\n"]);return S=function(){return e},e}function C(){var e=Object(m.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  margin-bottom: 20px;\n  font-size: 30px;\n"]);return C=function(){return e},e}function M(){var e=Object(m.a)(['\n  font-family: "Fjalla One", sans-serif;\n  text-transform: uppercase;\n']);return M=function(){return e},e}function F(){var e=Object(m.a)(['\n  font-family: "Fjalla One", sans-serif;\n  text-transform: uppercase;\n  font-size: 40px;\n  margin-bottom: 40px;\n']);return F=function(){return e},e}function E(){var e=Object(m.a)(["\n  margin-top: 70px;\n"]);return E=function(){return e},e}function L(){var e=Object(m.a)(["\n  text-align: center;\n  background-color: #444;\n  margin: 30px 0;\n  padding: 20px;\n"]);return L=function(){return e},e}function R(){var e=Object(m.a)(["\n  display: flex;\n  justify-content: center;\n  color: #eee;\n  background-color: #000;\n"]);return R=function(){return e},e}function T(){var e=Object(m.a)(["\n  from {\n      transform:rotate(0deg);\n  }\n  to {\n      transform:rotate(360deg);\n  }\n"]);return T=function(){return e},e}var z=Object(x.b)(T()),B="#6E9C47",D=x.a.main(R()),P=x.a.div(L()),_=x.a.div(E()),U=x.a.h1(F()),I=x.a.h2(M()),J=x.a.div(C()),A=x.a.section(S()),G=x.a.input(y()),W=x.a.button(w(),B),q=x.a.div(k(),z),H=x.a.div(v()),K=["Opening","Defense","Game","Accepted","Declined"],N=function(e){var n=e.map((function(e){return e.eco})),t=function(e){return e.map((function(e){return function(e,n){return n.reduce((function(e,n){return e.includes(n)?e.substring(0,e.indexOf(n)+n.length):e}),e)}(e.replace("https://www.chess.com/openings/","").replace("-"," "),K)}))}(p.a.compact(n));return function(e){return p.a.reduce(e,(function(e,n,t){return n>e.count?{opening:t,count:n}:e}),{opening:"",count:0})}(p.a.countBy(t))},Q=t(19),V=function(e){var n,t=e.match(/\[.*?]/gm).reduce((function(e,n){var t=n.replace(/[[\]"]/g,"").split(/ (.+)/);return e[t[0]]=t[1],e}),{});return Object(Q.a)(Object(Q.a)({},t),{},{Moves:(n=e,n.split(/\n\n/g)[1].split("  ").reduce((function(e,n){var t=n.split(" "),r=Object(j.a)(t,2),c=r[0],a=r[1];return e[c]=a,e}),{}))})},X=function(e){var n=e.icon;return Object(r.jsx)(h.a,{icon:n,color:B,style:{marginRight:"10px"}})},Y=function(e){var n=e.url;return Object(r.jsx)("a",{href:n,style:{marginLeft:"10px"},target:"_blank",rel:"noreferrer",children:Object(r.jsx)(h.a,{icon:g.b,style:{cursor:"pointer"}})})};var Z=function(){var e=Object(c.useState)(),n=Object(j.a)(e,2),t=n[0],a=n[1],i=Object(c.useState)(),s=Object(j.a)(i,2),u=s[0],b=s[1],f=Object(c.useState)(),m=Object(j.a)(f,2),x=m[0],v=m[1],k=Object(c.useState)(),w=Object(j.a)(k,2),y=w[0],S=w[1],C=Object(c.useState)(),M=Object(j.a)(C,2),F=M[0],E=M[1],L=Object(c.useState)(),R=Object(j.a)(L,2),T=R[0],z=R[1],B=Object(c.useState)(),K=Object(j.a)(B,2),Q=K[0],Z=K[1],$=Object(c.useState)(),ee=Object(j.a)($,2),ne=ee[0],te=ee[1],re=Object(c.useState)(),ce=Object(j.a)(re,2),ae=ce[0],ie=ce[1],se=Object(c.useState)(),ue=Object(j.a)(se,2),oe=ue[0],le=ue[1],je=function(){var e=Object(l.a)(o.a.mark((function e(n){var t,r,c,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),v(!0),t=y.replace(/(.*\/)*/,""),e.prev=3,e.next=6,d.a.get("https://api.chess.com/pub/tournament/".concat(t));case 6:return r=e.sent,e.next=9,d.a.get(r.data.rounds[0]);case 9:if(!(c=e.sent).data.games){e.next=14;break}a(c.data),e.next=22;break;case 14:if(!c.data.groups){e.next=21;break}return e.next=17,d.a.get(c.data.groups[0]);case 17:i=e.sent,a(i.data),e.next=22;break;case 21:throw new Error;case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(3),b(!0);case 27:return e.prev=27,v(!1),e.finish(27);case 30:case"end":return e.stop()}}),e,null,[[3,24,27,30]])})));return function(n){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){if(t){var e=N(t.games);E(e);var n=(s=t.games).reduce((function(e,n){var t="win"===n.white.result?n.white.rating:"win"===n.black.result?n.black.rating:null;if(!t)return e;var r="win"===n.white.result?n.black.rating:"win"===n.black.result?n.white.rating:null,c="win"===e.white.result?e.white.rating:"win"===e.black.result?e.black.rating:null;return r-t>("win"===e.white.result?e.black.rating:"win"===e.black.result?e.white.rating:null)-c?n:e}),s[0]);z(n);var r=function(e){var n=e.find((function(e){return p.a.get(e,"is_winner")?e.is_winner:1===e.place_finish}));return n?n.username:""}(t.players);Z(r);var c=function(e){var n=e.reduce((function(e,n){return e[n.black.result]+=1,e[n.white.result]+=1,e}),{draw:0,win:0,timeout:0,resigned:0,checkmated:0});return p.a.pick(n,["checkmated","timeout","resigned"])}(t.games);te(c);var a=function(e){return e.reduce((function(e,n){var t=V(n.pgn.replace(/\{\[%clk[\s\S]+?(?= |\n)/gim,"")),r=V(e.pgn.replace(/\{\[%clk[\s\S]+?(?= |\n)/gim,""));return p.a.replace(p.a.nth(Object.keys(t.Moves),-2),/\./g,"")>p.a.replace(p.a.nth(Object.keys(r.Moves),-2),/\./g,"")?n:e}),e[0])}(t.games);ie(a);var i=function(e){return e.reduce((function(e,n){var t=V(n.pgn.replace(/\{\[%clk[\s\S]+?(?= |\n)/gim,"")),r=V(e.pgn.replace(/\{\[%clk[\s\S]+?(?= |\n)/gim,""));return p.a.replace(p.a.nth(Object.keys(t.Moves),-2),/\./g,"")<p.a.replace(p.a.nth(Object.keys(r.Moves),-2),/\./g,"")?n:e}),e[0])}(t.games);le(i)}var s}),[t]),Object(r.jsx)(D,{children:Object(r.jsxs)(P,{children:[Object(r.jsx)(U,{children:"Chess.com Tournament Stats"}),Object(r.jsx)(I,{children:"Enter a tournament URL:"}),Object(r.jsxs)("form",{onSubmit:je,children:[Object(r.jsx)(G,{onChange:function(e){return S(e.target.value)}}),Object(r.jsx)(W,{type:"submit",children:"See Stats"})]}),u?Object(r.jsx)(H,{children:"Sorry, no data could be found for that tournament. Please double-check the tournament URL you entered."}):x?Object(r.jsx)(q,{children:Object(r.jsx)(h.a,{icon:g.e,color:"rgba(255,255,255,0.3)"})}):t?Object(r.jsxs)(_,{children:[Q&&Object(r.jsxs)(A,{children:[Object(r.jsxs)(J,{children:[Object(r.jsx)(X,{icon:g.g}),Object(r.jsx)(I,{children:"Winner"})]}),Object(r.jsx)("p",{children:Q})]}),p.a.get(F,"opening")>0&&Object(r.jsxs)(A,{children:[Object(r.jsxs)(J,{children:[Object(r.jsx)(X,{icon:g.a}),Object(r.jsx)(I,{children:"Most Common Opening"})]}),Object(r.jsxs)("p",{children:[F.opening," - played ",F.count," ","times"]})]}),ne&&Object(r.jsxs)(A,{children:[Object(r.jsxs)(J,{children:[Object(r.jsx)(X,{icon:g.c}),Object(r.jsx)(I,{children:"Result Types"})]}),Object(r.jsx)("div",{style:{width:200,margin:"auto"},children:Object(r.jsx)(O.PieChart,{label:function(e){var n=e.dataEntry;return"".concat(n.title,": ").concat(n.value)},labelStyle:{fontSize:"5px"},data:[{title:"Checkmated",value:ne.checkmated,color:"rgba(255,255,255,0.5)"},{title:"Timeout",value:ne.timeout,color:"rgba(255,255,255,0.2)"},{title:"Resigned",value:ne.resigned,color:"rgba(255,255,255,0.3)"}]})})]}),T&&Object(r.jsxs)(A,{children:[Object(r.jsxs)(J,{children:[Object(r.jsx)(X,{icon:g.f}),Object(r.jsx)(I,{children:"Biggest Upset"})]}),Object(r.jsxs)("p",{children:[T.white.username," (",T.white.rating,") vs"," ",T.black.username," (",T.black.rating,")",Object(r.jsx)(Y,{url:T.url})]})]}),ae&&Object(r.jsxs)(A,{children:[Object(r.jsxs)(J,{children:[Object(r.jsx)(X,{icon:g.h}),Object(r.jsx)(I,{children:"Marathon"})]}),Object(r.jsxs)("p",{children:[ae.white.username," vs"," ",ae.black.username," had the most moves!",Object(r.jsx)(Y,{url:ae.url})]})]}),oe&&Object(r.jsxs)(A,{children:[Object(r.jsxs)(J,{children:[Object(r.jsx)(X,{icon:g.d}),Object(r.jsx)(I,{children:"Sprint"})]}),Object(r.jsxs)("p",{children:[oe.white.username," vs"," ",oe.black.username," had the fewest moves!",Object(r.jsx)(Y,{url:oe.url})]})]})]}):null]})})},$=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,64)).then((function(n){var t=n.getCLS,r=n.getFID,c=n.getFCP,a=n.getLCP,i=n.getTTFB;t(e),r(e),c(e),a(e),i(e)}))};s.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(Z,{})}),document.getElementById("root")),$()}},[[63,1,2]]]);
//# sourceMappingURL=main.b1f44558.chunk.js.map